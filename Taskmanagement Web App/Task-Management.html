<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Manager</title>
  <link rel="stylesheet" href="styles.css">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <style>
  </style>
</head>
<body>
  <div id="container">
    <div class="Adder"><button id="addButton" onclick="popup()">+</button></div>
    <div class="addCon" id="addCon">
        <div id="ProjectInfo">
            <H1>Enter The basic details of your project.</H1>
            <div><label for="Name">Project Name</label>
                <input type="text" name="Name" class="PRinput" id="PRname" placeholder="Name"></div>
            <div>
                <label for="Description">Project Description</label>
            <input type="text" name="Description" class="PRinput"  id="PRdes" placeholder="Description">
            </div>
            <input type="button" id="CreateButton" value="Create Project">
        </div>

    </div>
    <div id="box1">
        <div id="info">
            <h1>Hi Anshul</h1>
        <h5>Welcome back to the workspace, we missed You!</h5>
        <input type="text" class="search" placeholder="Search Task or Projet..">
        </div>
        <h3>Projects <span id="totalProjects">(13)</span></h3>
        <div id="grid-list">
    </div></div>
    <div id="box2">
        <h1 id="projectName">Front-End</h1>
        <h5 id="projectDescription">A project in which we have to create a taskmanagement web app.</h5>
        <div id="today"><h3>Today</h3>
            <select name="operation" id="operation" onchange="removeOption('operation')">
                <option value="0">...</option>
                <option class="Add" value="Add">Add</option>
                <option class="Edit" value="Edit">Edit</option>
                <option class="Delete" value="Delete">Delete</option>
            </select>
    </div>
    <hr>
        <div class="todayTask">
            <div class="alignment">
                <div>
                    <i class='bx bx-list-ul list'></i>
                    <h5>Creating initial UI for page</h5></div>
                    <input type="button" value="Approved" class="indicators-approved">
                </div>
                <div class="alignment">
                    <div>
                        <i class='bx bx-list-ul list'></i>
                        <h5>Start Working on that UI</h5></div>
                        <input type="button" value="In-Waiting" class="indicators-waiting">
                    </div>
                    
                    
                </div>
                <div id="upcoming"><h3>Upcoming</h3>
                    <select name="operation" id="upcomingOperation" onchange="removeOption('upcomingOperation')">
                        <option value="0">. . .</option>
                        <option class="Add" value="Add">Add</option>
                        <option class="Edit" value="Edit">Edit</option>
                        <option class="Delete" value="Delete">Delete</option>
                    </select>
                </div>
                <hr>
                <div class="todayTask" id="upcomingTask">
                <div class="alignment">
                    <div>
                    <i class='bx bx-list-ul list'></i>
                    <h5>Writing CSS For Tha Page</h5></div>
                    <input type="button" value="In-Waiting" class="indicators-waiting">
                </div>
                <div class="alignment">
                    <div>
                        <i class='bx bx-list-ul list'></i>
                        <h5>wRITING Javascript For That Page</h5></div>
                        <input type="button" value="In-Waiting" class="indicators-waiting">
                    </div>
                    <div class="alignment">
                        <div>
                            <i class='bx bx-list-ul list'></i>
                    <h5>Finishing With Final Touches</h5></div>
                    <input type="button" value="In-Waiting" class="indicators-waiting">
                </div>
        </div>
    </div>
  </div>
  <script>
    var addCon = document.getElementById('addCon');
    var PRdes = document.getElementById("PRdes");
    var PRname = document.getElementById("PRname");
    var CreateButton = document.getElementById("CreateButton");
    var gridList = document.getElementById("grid-list") 
    var taskInfo = document.getElementsByClassName('task-info')
    const divs = document.querySelectorAll('.task-info');
    var projectName = document.getElementById('projectName');
    var projectDescription = document.getElementById('projectDescription');
    var todayTask = document.getElementById("todayTask");
    var option = document.getElementById('option');
    var select = document.getElementsByTagName('select');
    var addButton = document.getElementById('addButton');
    var a = 0;
    var colors = [
    "linear-gradient(rgb(190, 255, 190) , rgb(17, 218, 94))",
    "linear-gradient(rgb(190, 250, 255) , rgb(17, 195, 218))",
    "linear-gradient(rgb(237, 255, 190) , rgb(191, 218, 17))",
        "linear-gradient(rgb(255, 190, 190) , rgb(218, 84, 17))",
        "linear-gradient(rgb(255, 190, 232) , rgb(218, 17, 188))",
        "linear-gradient(rgb(203, 190, 255) , rgb(158, 17, 218))",
        
    ]
    

    function popup(){
        if (a === 0){
            addCon.classList.add('addConPopUp');
            addButton.innerText = 'x';
            a++;
        }
        else{
            addCon.classList.remove('addConPopUp');
            addButton.innerText = '+';
            a--;
        }
    }
    updateProjectList();

    //remove option => ... from select option
    function removeOption(selectID) {
        var selectElement = document.getElementById(selectID)
        var upOptions = selectElement.childNodes;
        upOptions.forEach((element,index)=>{
            if(element.value === '0' && selectElement.value !== '0'){
                selectElement.removeChild(selectElement.firstChild)
                console.log(element.value)
                selectElement.removeChild(selectElement.firstChild)
            }
            else{
                console.log(selectElement.value)
                
            }
        });
    }


    //It creates and shows how many projects we have .
    CreateButton.addEventListener("click",()=>{
        var a = {};
        var projectList = [];
        var strProjects = "";
        var jsonString = "";
        a = {'name':PRname.value,'description':PRdes.value};
        projectList.push(a);
        if(localStorage.projects){
            localStorage.projects += JSON.stringify(projectList);
            jsonString = localStorage.projects
            strProjects = jsonString.replace('][', ',');
            localStorage.projects = strProjects;
        }
        else{
            localStorage.projects = JSON.stringify(projectList);

        }
        updateProjectList();
    });



    function updateProjectList(){
        var totalProjects = document.getElementById('totalProjects');
        gridList.innerHTML = "";
        var colorIndex = 0;
        if (localStorage.projects){
            var parseProjects = [];
            parseProjects = JSON.parse(localStorage.projects);
            totalProjects.innerHTML = `(${parseProjects.length})`;
            parseProjects.forEach((project,index)=>{
                if(index>=6){
                    var AllTask = document.querySelectorAll('.task-info');
                    var last = AllTask.item(AllTask.length-1)
                    last.innerHTML = "";
                    var taskInfo = document.createElement('div');
                taskInfo.className = 'task-info';
                var taskImg = document.createElement('div');
                taskImg.className = 'taskImg';
                    taskImg.style.background = colors[colorIndex];
                    taskImg.innerHTML = `${parseProjects.length-5}+`;
                var Name = document.createElement('span');
                Name.innerText = `MORE`;
                last.appendChild(taskImg);
                last.appendChild(Name);


                }
                else{
                var taskInfo = document.createElement('div');
                taskInfo.className = 'task-info';
                var taskImg = document.createElement('div');
                taskImg.className = 'taskImg';
               if(colorIndex <=5){
                   taskImg.style.background = colors[colorIndex];
                   colorIndex++
            } 
            else{
                    colorIndex = 0;
                    taskImg.style.background = colors[colorIndex];

               }
               var shortName = project.name.split(" ");
               shortName.forEach((element)=>{
                taskImg.innerHTML += element[0];
               })
               taskImg.innerHTML
                var Name = document.createElement('span');
                Name.innerText = `${project.name}`;
                taskInfo.appendChild(taskImg);
                taskInfo.appendChild(Name);
                taskInfo.addEventListener("click",()=>{
                    projectName.innerText = project.name;
                    projectDescription.innerText = project.description;
                    Selected();
                })
                gridList.appendChild(taskInfo);
                }
            })
        }
        else{
            gridList.innerHTML = "No Projects Yet";

        }
    }


    //Selected Function to know which function is going to be selected.....
    function Selected(){

    }




    //Task Creation
    option.addEventListener('click',(e)=>{

    })



    </script>
  <script src="script.js"></script>
</body>
</html>

